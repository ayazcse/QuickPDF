<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuickPDF - Professional Converter</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        /* Custom CSS for a clean, professional aesthetic with a vibrant background */
        :root {
            --color-1: #4F46E5;
            --color-2: #EC4899;
            --color-3: #8B5CF6;
            --color-4: #F87171;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(-45deg, var(--color-1), var(--color-2), var(--color-3), var(--color-4));
            background-size: 400% 400%;
            animation: gradient-animation 15s ease infinite;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: flex-start; /* Aligns content to the top */
            align-items: stretch; /* Stretches items to fill the container */
            color: #E5E7EB; /* Light gray text for dark theme default */
        }
        
        @keyframes gradient-animation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Main card shadow and rounded corners */
        .professional-card {
            box-shadow: 0 10px 25px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        /* Hide default file input */
        input[type='file'] {
            display: none;
        }

        /* Custom spinner for loading state */
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid #fff;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            vertical-align: middle;
            margin-right: 8px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Custom gradient button classes (no change needed, they look good on dark) */
        .gradient-button {
            background-image: linear-gradient(45deg, #4F46E5, #EC4899);
            transition: all 0.3s ease-in-out;
        }
        .gradient-button:hover {
            background-image: linear-gradient(45deg, #EC4899, #8B5CF6);
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        .gradient-download-button {
            background-image: linear-gradient(45deg, #25C65F, #14B8A6);
            transition: all 0.3s ease-in-out;
        }
        .gradient-download-button:hover {
            background-image: linear-gradient(45deg, #14B8A6, #22D3EE);
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>
<body class="antialiased flex flex-col min-h-screen">
    <main class="flex-grow flex justify-center items-center w-full p-4 sm:p-6 lg:p-8">
        <div class="professional-card bg-gray-900 p-6 sm:p-10 rounded-xl w-full max-w-sm sm:max-w-md md:max-w-lg lg:max-w-xl text-center">
            <div class="mb-6">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto text-indigo-400 mb-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <line x1="12" y1="12" x2="12" y2="18"></line>
                    <line x1="9" y1="15" x2="15" y2="15"></line>
                </svg>
                <h1 class="text-2xl sm:text-3xl font-bold text-white">
                    QuickPDF Converter
                </h1>
                <p class="mt-2 text-gray-400 text-sm sm:text-base">
                    Securely convert images to a single PDF document on your device.
                </p>
            </div>

            <label for="fileInput" class="file-label inline-flex items-center justify-center px-6 py-3 bg-gray-800 text-gray-400 font-semibold rounded-lg hover:bg-gray-700 transition duration-300 ease-in-out cursor-pointer w-full text-sm sm:text-base">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path></svg>
                Choose Images
            </label>
            <input type="file" id="fileInput" multiple accept="image/*" class="hidden">

            <button id="convertButton" class="btn mt-4 w-full px-6 py-3 text-white font-semibold rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 flex items-center justify-center text-sm sm:text-base gradient-button">
                <span id="buttonText">Convert to PDF</span>
            </button>

            <div id="status" class="status-message mt-4 text-gray-400 text-xs sm:text-sm"></div>

            <div id="download-section" class="download-container hidden mt-6">
                <a id="downloadLink" href="#" download="quickpdf_output.pdf" class="block">
                    <button class="btn w-full px-6 py-3 text-white font-semibold rounded-lg focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-opacity-50 flex items-center justify-center text-sm sm:text-base gradient-download-button">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l3-3m-3 3l-3-3m-4 8h10a2 2 0 002-2v-7a2 2 0 00-2-2H7a2 2 0 00-2 2v7a2 2 0 002 2z"></path></svg>
                        Download PDF
                    </button>
                </a>
            </div>
        </div>
    </main>

    <footer class="w-full py-6 px-6 text-gray-200 text-center text-xs sm:text-sm">
        <p>&copy; 2025 QuickPDF. All rights reserved. | Developed by Ayaz Alam</p>
    </footer>

    <script type="module">
        // Import jsPDF from the global window object
        const { jsPDF } = window.jspdf;

        document.getElementById('convertButton').addEventListener('click', async function() {
            const files = document.getElementById('fileInput').files;
            const statusDiv = document.getElementById('status');
            const downloadSection = document.getElementById('download-section');
            const downloadLink = document.getElementById('downloadLink');
            const convertButton = document.getElementById('convertButton');
            const buttonText = document.getElementById('buttonText');

            // Reset UI
            statusDiv.textContent = '';
            downloadSection.classList.add('hidden');
            convertButton.disabled = false;
            buttonText.innerHTML = 'Convert to PDF';

            if (files.length === 0) {
                statusDiv.textContent = 'Please select at least one image.';
                return;
            }

            // Show loading state
            buttonText.innerHTML = '<span class="spinner"></span> Converting...';
            convertButton.disabled = true;
            statusDiv.textContent = 'Processing images... This might take a moment.';

            try {
                const doc = new jsPDF(); // Initialize jsPDF
                let firstImage = true;

                for (let i = 0; i < files.length; i++) {
                    const file = files[i];
                    statusDiv.textContent = `Processing image ${i + 1} of ${files.length}...`;

                    // Ensure file is an image
                    if (!file.type.startsWith('image/')) {
                        console.warn(`Skipping non-image file: ${file.name}`);
                        continue;
                    }

                    const reader = new FileReader();
                    reader.readAsDataURL(file);

                    await new Promise((resolve, reject) => {
                        reader.onload = async (e) => {
                            const img = new Image();
                            img.src = e.target.result;

                            img.onload = async (). => {
                                if (!firstImage) {
                                    doc.addPage(); // Add a new page for subsequent images
                                } else {
                                    firstImage = false;
                                }

                                // Calculate dimensions to fit image within PDF page
                                const imgWidth = img.width;
                                const imgHeight = img.height;
                                const pdfWidth = doc.internal.pageSize.getWidth();
                                const pdfHeight = doc.internal.pageSize.getHeight();

                                let ratio = Math.min(pdfWidth / imgWidth, pdfHeight / imgHeight);
                                let finalWidth = imgWidth * ratio;
                                let finalHeight = imgHeight * ratio;

                                // Center the image on the page
                                const x = (pdfWidth - finalWidth) / 2;
                                const y = (pdfHeight - finalHeight) / 2;

                                doc.addImage(img.src, 'JPEG', x, y, finalWidth, finalHeight);
                                resolve();
                            };
                            img.onerror = reject;
                        };
                        reader.onerror = reject;
                    });
                }

                // Generate PDF and create download link
                const pdfBlob = doc.output('blob');
                const pdfUrl = URL.createObjectURL(pdfBlob);

                downloadLink.href = pdfUrl;
                downloadLink.download = 'quickpdf_output.pdf'; // Suggest a filename
                downloadSection.classList.remove('hidden'); // Show download button

                statusDiv.textContent = 'Conversion successful! Click "Download PDF" to save.';
                buttonText.innerHTML = 'Convert to PDF';
                convertButton.disabled = false;

            } catch (error) {
                console.error('Error during PDF conversion:', error);
                statusDiv.textContent = 'Error: Failed to convert images to PDF. Please try again.';
                buttonText.innerHTML = 'Convert to PDF';
                convertButton.disabled = false;
            }
        });

        // Update file label text when files are selected
        document.getElementById('fileInput').addEventListener('change', function() {
            const fileLabel = document.querySelector('.file-label');
            if (this.files.length > 0) {
                fileLabel.innerHTML = `<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> ${this.files.routes.length} Image(s) Selected`;
                document.getElementById('status').textContent = ''; // Clear status on new file selection
                document.getElementById('download-section').classList.add('hidden'); // Hide download button
            } else {
                fileLabel.innerHTML = `<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path></svg> Choose Images`;
            }
        });
    </script>
</body>
</html>



